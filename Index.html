// Add this to the existing script section, after the device orientation code



// Form handling

const consultationBtn = document.getElementById('colorShift');

const aboutUsBtn = document.getElementById('invertColors');

const modalOverlay = document.querySelector('.modal-overlay');

const consultationForm = document.querySelector('.consultation-form');

const closeModal = document.querySelector('.close-modal');

const form = document.getElementById('consultationForm');

const successMessage = document.querySelector('.success-message');



consultationBtn.addEventListener('click', () => {

    modalOverlay.classList.add('active');

    consultationForm.classList.add('active');

});



const closeConsultationForm = () => {

    modalOverlay.classList.remove('active');

    consultationForm.classList.remove('active');

};



closeModal.addEventListener('click', closeConsultationForm);

modalOverlay.addEventListener('click', (e) => {

    if (e.target === modalOverlay) {

        closeConsultationForm();

    }

});



form.addEventListener('submit', (e) => {

    e.preventDefault();

    closeConsultationForm();

    

    // Show success message

    successMessage.classList.add('active');

    setTimeout(() => {

        successMessage.classList.remove('active');

    }, 3000);

    

    // Here you would typically send the form data to your server

    console.log('Form submitted:', {

        name: form.querySelector('input[type="text"]').value,

        email: form.querySelector('input[type="email"]').value,

        phone: form.querySelector('input[type="tel"]').value,

        message: form.querySelector('textarea').value

    });

    

    form.reset();

});



// Scroll-based background changes

let lastScrollPosition = 0;

const maxScroll = document.documentElement.scrollHeight - window.innerHeight;



window.addEventListener('scroll', () => {

    const scrollPosition = window.scrollY;

    const scrollProgress = (scrollPosition / maxScroll) * 100;

    

    // Calculate background colors based on scroll position

    const background = document.querySelector('.background-container');

    

    if (scrollProgress < 33) {

        background.style.background = `linear-gradient(45deg, 

            var(--background-dark) ${scrollProgress}%, 

            #2b0147 ${50 + scrollProgress}%, 

            var(--background-dark) 100%)`;

    } else if (scrollProgress < 66) {

        background.style.background = `linear-gradient(45deg, 

            #2b0147 ${scrollProgress - 33}%, 

            #1f0f4c ${50 + scrollProgress - 33}%, 

            #2b0147 100%)`;

    } else {

        background.style.background = `linear-gradient(45deg, 

            #1f0f4c ${scrollProgress - 66}%, 

            var(--background-dark) ${50 + scrollProgress - 66}%, 

            #1f0f4c 100%)`;

    }

    

    lastScrollPosition = scrollPosition;

});



// About Us button (placeholder for video functionality)

aboutUsBtn.addEventListener('click', () => {

    document.body.style.filter = 

        document.body.style.filter === 'invert(1)' ? 'none' : 'invert(1)';

    // Video popup functionality to be added later

});



// Touch drag effect for sun

const sun = document.querySelector('.sun');

let isDragging = false;

let startY;



document.addEventListener('touchstart', (e) => {

    isDragging = true;

    startY = e.touches[0].clientY;

});



document.addEventListener('touchmove', (e) => {

    if (!isDragging) return;

    

    const deltaY = e.touches[0].clientY - startY;

    const newPosition = Math.max(10, Math.min(90, 10 + (deltaY / window.innerHeight) * 100));

    sun.style.top = `${newPosition}vh`;

    

    // Adjust grid perspective based on sun position

    const gridRotation = 45 + (deltaY / window.innerHeight) * 20;

    document.querySelector('.grid-overlay').style.transform = 

        `rotateX(${gridRotation}deg)`;

});



document.addEventListener('touchend', () => {

    isDragging = false;

});
